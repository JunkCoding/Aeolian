<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>MQTT Configuration</title>
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" type="text/css" href="/css/common.css">
  <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
  <script src="/js/common.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function (event)
    {
      document.getElementById("mqtt_master").checked = %mqtt_master%;
      document.getElementById("mqtt_slave").checked = %mqtt_slave%;
    });
  </script></head>

<body onload="set_background()">
  <div class="navbar" id="myTopnav">
    <a href="/index.html">Status</a>
    <a href="/patterns.html">Patterns</a>
    <a href="/themes.html">Themes</a>
    <a href="/schedule.html">Schedule</a>
    <a class="active" href="/mqttconfig.html">MQTT</a>
    <a href="/wifi.html">WiFi</a>
    <a href="/tasks.html">Tasks</a>
    <a href="/flash.html">Flash</a>
    <a href="/console.html">Console</a>
  </div>
  <div class="main" id="main">
    <div id="busy-wrapper"><div id="ring"><text id="busy-message"></text><span id="gfx" style="display:inline;">&nbsp;</span></div></div>
    <h2>MQTT Network Configuration</h2>
    <table class="status_table">
      <tbody>
        <tr>
          <th>Parameter</th>
          <th>Value</th>
        </tr>
        <tr>
          <th>MQTT Client Id:</th>
          <td> <input id="mqtt_client_id" type="text" maxlength="32" size="45" name="mqtt_client_id" value="%mqtt_client_id%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>MQTT URI:</th>
          <td> <input id="mqtt_uri" type="text" maxlength="32" size="45" name="mqtt_uri" value="%mqtt_uri%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>MQTT Port:</th>
          <td> <input id="mqtt_port" type="text" maxlength="8" size="45" name="mqtt_port" value="%mqtt_port%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>MQTT User:</th>
          <td> <input id="mqtt_user" type="text" maxlength="32" size="45" name="mqtt_user" value="%mqtt_user%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>MQTT Password:</th>
          <td> <input id="mqtt_password" type="password" maxlength="64" size="45" name="mqtt_password" value="%mqtt_password%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>MQTT Keep Alive:</th>
          <td> <input id="mqtt_keep_alive" type="text" maxlength="8" size="45" name="mqtt_keep_alive" value="%mqtt_keep_alive%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
      </tbody>
    </table>
    <br>
    <h2>MQTT Control Configuration</h1>
    <table class="status_table">
      <tbody>
        <tr>
          <th></th>
          <th>Receive Messages (subscribe)</th>
          <th>Send Messages (publish)</th>
        </tr>
        <tr>
          <th>Security Light:</td>
          <td class="nopadding"> <input id="cLight" type="text" name="cLight" value="%cLight%" onchange="updateControl(this.id, this.value)"> </td>
          <td class="nopadding"> <input id="sLight" type="text" name="sLight" value="%sLight%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>Hikvision Alerts/Control:</td>
          <td class="nopadding"> <input id="cHikAlarm" type="text" name="cHikAlarm" value="%cHikAlarm%" onchange="updateControl(this.id, this.value)"> </td>
          <td class="nopadding"> <input id="sHikAlarm" type="text" name="sHikAlarm" value="%sHikAlarm%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>LEDs:</td>
          <td class="nopadding"> <input id="cLEDs" type="text" name="cLEDs" value="%cLEDs%" onchange="updateControl(this.id, this.value)"> </td>
          <td class="nopadding"> <input id="sLEDs" type="text" name="sLEDs" value="%sLEDs%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>Patterns:</td>
          <td class="nopadding"> <input id="cPattern" type="text" name="cPattern" value="%cPattern%" onchange="updateControl(this.id, this.value)"> </td>
          <td class="nopadding"> <input id="sPattern" type="text" name="sPattern" value="%sPattern%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>Connect:</td>
          <td class="nopadding"> <input id="cConnect" type="text" name="cConnect" value="%cConnect%" onchange="updateControl(this.id, this.value)"> </td>
          <td class="nopadding"> <input id="sConnect" type="text" name="sConnect" value="%sConnect%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
        <tr>
          <th>Disconnect (LWT):</td>
          <td class="nopadding"> <input id="cDiscon" type="text" name="cDiscon" value="%cDiscon%" onchange="updateControl(this.id, this.value)"> </td>
          <td class="nopadding"> <input id="sDiscon" type="text" name="sDiscon" value="%sDiscon%" onchange="updateControl(this.id, this.value)"> </td>
        </tr>
      </tbody>
    </table>
    <div class="preferences">
      <div class="container">
        <div class="preference">
          <label for="mqtt_master">MQTT Master:</label>
          <div class="tickbox">
            <input type="checkbox" name="mqtt_master" id="mqtt_master" onclick="onClickHandler(this.id)">
          </div>
        </div>
        <label for="mqtt_master" class="pref_label">Send commands to other MQTT clients</label>
      </div>
      <div class="container">
        <div class="preference">
          <label for="mqtt_slave">MQTT Slave:</label>
          <div class="tickbox">
            <input type="checkbox" name="mqtt_slave" id="mqtt_slave" onclick="onClickHandler(this.id)">
          </div>
        </div>
        <label for="mqtt_slave" class="pref_label">Receive commands via MQTT</label>
      </div>
    </div>
    <div class="notes">
      <font size="3"><b>The following substitutions are available:</b></font><br>
      <font size="2">%c will be replaced with "MQTT Client ID" during execution.</font>
    </div>
  </div>
</body>

</html>